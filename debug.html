<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPGA Pin Planner - Debug</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #1e1e1e;
            color: #ffffff;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            background-color: #333;
        }
        .success { background-color: #2d5a27; }
        .error { background-color: #5a2727; }
        .loading { background-color: #2d4a5a; }
    </style>
</head>
<body>
    <h1>ğŸ”§ FPGA Pin Planner - ãƒ‡ãƒãƒƒã‚°ãƒšãƒ¼ã‚¸</h1>
    
    <div id="status" class="status loading">
        ğŸ“Š ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ç¢ºèªä¸­...
    </div>
    
    <div id="details"></div>
    
    <h2>ğŸ§ª åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
    <button onclick="testBasicFunction()" style="padding: 8px 16px; background-color: #4A90E2; border: none; border-radius: 4px; color: white; cursor: pointer;">
        åŸºæœ¬æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ
    </button>
    
    <div id="test-results"></div>
    
    <script>
        console.log('ğŸš€ ãƒ‡ãƒãƒƒã‚°ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
        
        function updateStatus(message, type = 'loading') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }
        
        function addDetail(message) {
            const details = document.getElementById('details');
            const div = document.createElement('div');
            div.className = 'status';
            div.textContent = message;
            details.appendChild(div);
        }
        
        // React app ã®çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        setTimeout(() => {
            try {
                // Viteé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®ç¢ºèª
                fetch('http://localhost:5175')
                    .then(response => {
                        if (response.ok) {
                            updateStatus('âœ… é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™', 'success');
                            addDetail('ğŸ“¡ HTTP Status: ' + response.status);
                            return response.text();
                        } else {
                            throw new Error('Server response: ' + response.status);
                        }
                    })
                    .then(html => {
                        if (html.includes('<div id="root"></div>')) {
                            addDetail('âœ… Reactã‚¢ãƒ—ãƒªã®ãƒ«ãƒ¼ãƒˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ');
                        } else {
                            addDetail('âŒ Reactã‚¢ãƒ—ãƒªã®ãƒ«ãƒ¼ãƒˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                        }
                        
                        if (html.includes('script')) {
                            addDetail('âœ… JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™');
                        } else {
                            addDetail('âŒ JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                        }
                    })
                    .catch(error => {
                        updateStatus('âŒ é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
                        addDetail('ã‚¨ãƒ©ãƒ¼: ' + error.message);
                    });
            } catch (error) {
                updateStatus('âŒ äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', 'error');
                addDetail('ã‚¨ãƒ©ãƒ¼: ' + error.message);
            }
        }, 1000);
        
        function testBasicFunction() {
            const resultsDiv = document.getElementById('test-results');
            
            let results = '<h3>ğŸ§ª ãƒ†ã‚¹ãƒˆçµæœ</h3>';
            
            // Browser support tests
            results += '<div class="status">';
            results += '<strong>ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆç¢ºèª:</strong><br>';
            results += 'ES6 Modules: ' + (typeof import !== 'undefined' ? 'âœ…' : 'âŒ') + '<br>';
            results += 'Fetch API: ' + (typeof fetch !== 'undefined' ? 'âœ…' : 'âŒ') + '<br>';
            results += 'Local Storage: ' + (typeof localStorage !== 'undefined' ? 'âœ…' : 'âŒ') + '<br>';
            results += 'File API: ' + (typeof FileReader !== 'undefined' ? 'âœ…' : 'âŒ') + '<br>';
            results += '</div>';
            
            resultsDiv.innerHTML = results;
        }
        
        // Console error monitoring
        const originalError = console.error;
        console.error = function(...args) {
            addDetail('âŒ Console Error: ' + args.join(' '));
            originalError.apply(console, args);
        };
        
        // Unhandled promise rejection monitoring
        window.addEventListener('unhandledrejection', function(event) {
            addDetail('âŒ Unhandled Promise Rejection: ' + event.reason);
        });
        
        // JavaScript error monitoring
        window.addEventListener('error', function(event) {
            addDetail('âŒ JavaScript Error: ' + event.message + ' at ' + event.filename + ':' + event.lineno);
        });
    </script>
</body>
</html>
